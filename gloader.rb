# typed: false
# frozen_string_literal: true

# This file was generated by GoReleaser. DO NOT EDIT.
class Gloader < Formula
  desc "gloader is database data migration tool from any source to any destination"
  homepage "https://github.com/mohammadv184/gloader"
  version "0.1.0-dev.20"
  license "MIT"

  on_macos do
    if Hardware::CPU.intel?
      url "https://github.com/mohammadv184/gloader/releases/download/v0.1.0-dev.20/gloader-0.1.0-dev.20-darwin-amd64.tar.gz"
      sha256 "fda01c0be25064bfeb932388df4ccc95dd58bdbc154cbe22c2b22542f8a87496"

      def install
        bin.install "gloader"
      end
    end
    if Hardware::CPU.arm?
      url "https://github.com/mohammadv184/gloader/releases/download/v0.1.0-dev.20/gloader-0.1.0-dev.20-darwin-arm64.tar.gz"
      sha256 "7abc99529264d31e298b89302ef11ff406013e92323075f28fbf1c8d9b240105"

      def install
        bin.install "gloader"
      end
    end
  end

  on_linux do
    if Hardware::CPU.arm? && !Hardware::CPU.is_64_bit?
      url "https://github.com/mohammadv184/gloader/releases/download/v0.1.0-dev.20/gloader-0.1.0-dev.20-linux-armv6.tar.gz"
      sha256 "e41c2b4f0273ccfe306195188717497aac3a94180abc275222349477b2cbe516"

      def install
        bin.install "gloader"
      end
    end
    if Hardware::CPU.arm? && Hardware::CPU.is_64_bit?
      url "https://github.com/mohammadv184/gloader/releases/download/v0.1.0-dev.20/gloader-0.1.0-dev.20-linux-arm64.tar.gz"
      sha256 "db025eba4abb17427790dbc435c4d03d472a29f048720d44a4d5d45e41cd8320"

      def install
        bin.install "gloader"
      end
    end
    if Hardware::CPU.intel?
      url "https://github.com/mohammadv184/gloader/releases/download/v0.1.0-dev.20/gloader-0.1.0-dev.20-linux-amd64.tar.gz"
      sha256 "bfb735756491553ca8aa17af27f4cf9566ca82d3a998e7b4944f3a9b0db284e6"

      def install
        bin.install "gloader"
      end
    end
  end

  def post_install
    # Adding autocompletion
    # Automatically detect and add autocompletion for bash, zsh, fish and powershell

    if [ -n "$BASH_VERSION" ]; then
      echo "Bash detected"
      echo "Adding autocompletion for bash"
      gloader completion bash > $(brew --prefix)/etc/bash_completion.d/gloader
    fi

    if [ -n "$ZSH_VERSION" ]; then
      echo "Zsh detected"
      echo "Adding autocompletion for zsh"
      gloader completion zsh > $(brew --prefix)/share/zsh/site-functions/_gloader
    fi

    if [ -n "$FISH_VERSION" ]; then
      echo "Fish detected"
      echo "Adding autocompletion for fish"
      gloader completion fish > ~/.config/fish/completions/gloader.fish
    fi
  end

  test do
    system "#{bin}/gloader", "version"
  end
end
